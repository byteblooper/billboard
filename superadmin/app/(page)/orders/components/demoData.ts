import { Order, PaymentAnalytics } from './types';

export const demoOrders: Order[] = [
  {
    id: 'ord-1',
    orderNumber: 'ORD-2026-00001',
    customerId: 'cust-1',
    customerName: 'Rafiq Ahmed',
    customerEmail: 'rafiq@email.com',
    customerPhone: '+880 1711-111111',
    shopId: 'shop-1',
    shopName: 'Tech Store BD',
    sellerId: '1',
    sellerName: 'Ahmed Rahman',
    items: [
      {
        id: 'item-1',
        productId: 'p1',
        productName: 'iPhone 15 Pro Max',
        productImage: 'https://images.unsplash.com/photo-1695048133142-1a20484d2569?w=100&h=100&fit=crop',
        sku: 'IPH-15PM-256',
        quantity: 1,
        unitPrice: 185000,
        totalPrice: 185000,
      },
      {
        id: 'item-2',
        productId: 'p3',
        productName: 'AirPods Pro 2',
        productImage: 'https://images.unsplash.com/photo-1600294037681-c80b4cb5b434?w=100&h=100&fit=crop',
        sku: 'APP-2-USB',
        quantity: 1,
        unitPrice: 35000,
        totalPrice: 35000,
      },
    ],
    subtotal: 220000,
    shippingCost: 100,
    discount: 5000,
    total: 215100,
    paymentMethod: 'bkash',
    paymentStatus: 'paid',
    status: 'delivered',
    shippingAddress: {
      address: 'House 12, Road 5, Block A',
      city: 'Dhaka',
      area: 'Gulshan-1',
      zipCode: '1212',
    },
    timeline: [
      { id: 't1', status: 'pending', description: 'Order placed', timestamp: '2026-01-20T10:30:00Z' },
      { id: 't2', status: 'confirmed', description: 'Order confirmed by seller', timestamp: '2026-01-20T11:00:00Z', actor: 'Seller' },
      { id: 't3', status: 'processing', description: 'Order is being prepared', timestamp: '2026-01-20T14:00:00Z' },
      { id: 't4', status: 'shipped', description: 'Order shipped via RedX', timestamp: '2026-01-21T09:00:00Z' },
      { id: 't5', status: 'delivered', description: 'Order delivered successfully', timestamp: '2026-01-22T15:30:00Z' },
    ],
    createdAt: '2026-01-20T10:30:00Z',
    updatedAt: '2026-01-22T15:30:00Z',
    deliveredAt: '2026-01-22T15:30:00Z',
  },
  {
    id: 'ord-2',
    orderNumber: 'ORD-2026-00002',
    customerId: 'cust-2',
    customerName: 'Sabrina Khatun',
    customerEmail: 'sabrina@email.com',
    customerPhone: '+880 1812-222222',
    shopId: 'shop-2',
    shopName: 'Fashion Hub',
    sellerId: '2',
    sellerName: 'Fatima Begum',
    items: [
      {
        id: 'item-3',
        productId: 'p6',
        productName: 'Premium Cotton T-Shirt',
        productImage: 'https://images.unsplash.com/photo-1521572163474-6864f9cf17ab?w=100&h=100&fit=crop',
        sku: 'FH-TS-001',
        quantity: 3,
        unitPrice: 1200,
        totalPrice: 3600,
      },
      {
        id: 'item-4',
        productId: 'p7',
        productName: 'Denim Jeans Classic',
        productImage: 'https://images.unsplash.com/photo-1542272604-787c3835535d?w=100&h=100&fit=crop',
        sku: 'FH-DJ-002',
        quantity: 2,
        unitPrice: 2500,
        totalPrice: 5000,
      },
    ],
    subtotal: 8600,
    shippingCost: 60,
    discount: 0,
    total: 8660,
    paymentMethod: 'cod',
    paymentStatus: 'pending',
    status: 'shipped',
    shippingAddress: {
      address: 'Flat 5B, Green Valley Apartments',
      city: 'Dhaka',
      area: 'Dhanmondi',
      zipCode: '1205',
    },
    timeline: [
      { id: 't6', status: 'pending', description: 'Order placed', timestamp: '2026-01-21T14:00:00Z' },
      { id: 't7', status: 'confirmed', description: 'Order confirmed', timestamp: '2026-01-21T15:00:00Z', actor: 'Seller' },
      { id: 't8', status: 'processing', description: 'Order is being prepared', timestamp: '2026-01-21T16:30:00Z' },
      { id: 't9', status: 'shipped', description: 'Order shipped via Pathao', timestamp: '2026-01-22T10:00:00Z' },
    ],
    createdAt: '2026-01-21T14:00:00Z',
    updatedAt: '2026-01-22T10:00:00Z',
    estimatedDelivery: '2026-01-24',
  },
  {
    id: 'ord-3',
    orderNumber: 'ORD-2026-00003',
    customerId: 'cust-3',
    customerName: 'Mohammad Hossain',
    customerEmail: 'hossain@email.com',
    customerPhone: '+880 1911-333333',
    shopId: 'shop-3',
    shopName: 'Grocery Mart BD',
    sellerId: '5',
    sellerName: 'Karim Uddin',
    items: [
      {
        id: 'item-5',
        productId: 'p9',
        productName: 'Organic Rice 5kg',
        productImage: 'https://images.unsplash.com/photo-1586201375761-83865001e31c?w=100&h=100&fit=crop',
        sku: 'GM-OR-5KG',
        quantity: 2,
        unitPrice: 650,
        totalPrice: 1300,
      },
    ],
    subtotal: 1300,
    shippingCost: 40,
    discount: 0,
    total: 1340,
    paymentMethod: 'nagad',
    paymentStatus: 'paid',
    status: 'processing',
    shippingAddress: {
      address: 'House 45, Sector 10',
      city: 'Dhaka',
      area: 'Uttara',
      zipCode: '1230',
    },
    timeline: [
      { id: 't10', status: 'pending', description: 'Order placed', timestamp: '2026-01-22T09:00:00Z' },
      { id: 't11', status: 'confirmed', description: 'Order confirmed', timestamp: '2026-01-22T09:30:00Z', actor: 'Seller' },
      { id: 't12', status: 'processing', description: 'Order is being prepared', timestamp: '2026-01-22T11:00:00Z' },
    ],
    createdAt: '2026-01-22T09:00:00Z',
    updatedAt: '2026-01-22T11:00:00Z',
    estimatedDelivery: '2026-01-23',
  },
  {
    id: 'ord-4',
    orderNumber: 'ORD-2026-00004',
    customerId: 'cust-4',
    customerName: 'Nusrat Jahan',
    customerEmail: 'nusrat@email.com',
    customerPhone: '+880 1612-444444',
    shopId: 'shop-1',
    shopName: 'Tech Store BD',
    sellerId: '1',
    sellerName: 'Ahmed Rahman',
    items: [
      {
        id: 'item-6',
        productId: 'p2',
        productName: 'MacBook Pro 14"',
        productImage: 'https://images.unsplash.com/photo-1517336714731-489689fd1ca8?w=100&h=100&fit=crop',
        sku: 'MBP-14-M3',
        quantity: 1,
        unitPrice: 295000,
        totalPrice: 295000,
      },
    ],
    subtotal: 295000,
    shippingCost: 0,
    discount: 10000,
    total: 285000,
    paymentMethod: 'card',
    paymentStatus: 'failed',
    status: 'failed',
    shippingAddress: {
      address: 'Apt 8C, Tower 2, Bashundhara R/A',
      city: 'Dhaka',
      area: 'Bashundhara',
      zipCode: '1229',
    },
    timeline: [
      { id: 't13', status: 'pending', description: 'Order placed', timestamp: '2026-01-22T16:00:00Z' },
      { id: 't14', status: 'failed', description: 'Payment failed - Card declined', timestamp: '2026-01-22T16:01:00Z' },
    ],
    failureReason: 'Card payment declined - Insufficient funds',
    createdAt: '2026-01-22T16:00:00Z',
    updatedAt: '2026-01-22T16:01:00Z',
  },
  {
    id: 'ord-5',
    orderNumber: 'ORD-2026-00005',
    customerId: 'cust-5',
    customerName: 'Kamal Uddin',
    customerEmail: 'kamal@email.com',
    customerPhone: '+880 1512-555555',
    shopId: 'shop-4',
    shopName: 'Sports Zone',
    sellerId: '7',
    sellerName: 'Imran Ali',
    items: [
      {
        id: 'item-7',
        productId: 'p12',
        productName: 'Professional Football',
        productImage: 'https://images.unsplash.com/photo-1614632537197-38a17061c2bd?w=100&h=100&fit=crop',
        sku: 'SZ-FB-PRO',
        quantity: 2,
        unitPrice: 2500,
        totalPrice: 5000,
      },
    ],
    subtotal: 5000,
    shippingCost: 80,
    discount: 0,
    total: 5080,
    paymentMethod: 'bkash',
    paymentStatus: 'paid',
    status: 'stuck',
    shippingAddress: {
      address: 'House 78, Road 11',
      city: 'Dhaka',
      area: 'Banani',
      zipCode: '1213',
    },
    timeline: [
      { id: 't15', status: 'pending', description: 'Order placed', timestamp: '2026-01-19T10:00:00Z' },
      { id: 't16', status: 'confirmed', description: 'Order confirmed', timestamp: '2026-01-19T11:00:00Z', actor: 'Seller' },
      { id: 't17', status: 'processing', description: 'Order is being prepared', timestamp: '2026-01-19T14:00:00Z' },
    ],
    stuckReason: 'Seller not responding for 3+ days',
    createdAt: '2026-01-19T10:00:00Z',
    updatedAt: '2026-01-19T14:00:00Z',
    estimatedDelivery: '2026-01-21',
  },
  {
    id: 'ord-6',
    orderNumber: 'ORD-2026-00006',
    customerId: 'cust-6',
    customerName: 'Fatema Akter',
    customerEmail: 'fatema@email.com',
    customerPhone: '+880 1712-666666',
    shopId: 'shop-2',
    shopName: 'Fashion Hub',
    sellerId: '2',
    sellerName: 'Fatima Begum',
    items: [
      {
        id: 'item-8',
        productId: 'p8',
        productName: 'Silk Saree Collection',
        productImage: 'https://images.unsplash.com/photo-1610030469983-98e550d6193c?w=100&h=100&fit=crop',
        sku: 'FH-SS-003',
        quantity: 1,
        unitPrice: 8500,
        totalPrice: 8500,
      },
    ],
    subtotal: 8500,
    shippingCost: 100,
    discount: 500,
    total: 8100,
    paymentMethod: 'cod',
    paymentStatus: 'paid',
    status: 'refunded',
    shippingAddress: {
      address: 'House 23, Road 8',
      city: 'Dhaka',
      area: 'Mirpur-10',
      zipCode: '1216',
    },
    timeline: [
      { id: 't18', status: 'pending', description: 'Order placed', timestamp: '2026-01-15T12:00:00Z' },
      { id: 't19', status: 'confirmed', description: 'Order confirmed', timestamp: '2026-01-15T13:00:00Z', actor: 'Seller' },
      { id: 't20', status: 'shipped', description: 'Order shipped', timestamp: '2026-01-16T09:00:00Z' },
      { id: 't21', status: 'delivered', description: 'Order delivered', timestamp: '2026-01-17T14:00:00Z' },
      { id: 't22', status: 'refunded', description: 'Refund processed - Product defect', timestamp: '2026-01-20T10:00:00Z', actor: 'Admin' },
    ],
    refundRequest: {
      id: 'ref-1',
      orderId: 'ord-6',
      amount: 8100,
      reason: 'Product had manufacturing defect - color fading',
      status: 'completed',
      requestedAt: '2026-01-18T16:00:00Z',
      processedAt: '2026-01-20T10:00:00Z',
      processedBy: 'Admin User',
      notes: 'Full refund approved due to quality issue',
    },
    createdAt: '2026-01-15T12:00:00Z',
    updatedAt: '2026-01-20T10:00:00Z',
    deliveredAt: '2026-01-17T14:00:00Z',
  },
  {
    id: 'ord-7',
    orderNumber: 'ORD-2026-00007',
    customerId: 'cust-7',
    customerName: 'Rahim Khan',
    customerEmail: 'rahim@email.com',
    customerPhone: '+880 1812-777777',
    shopId: 'shop-1',
    shopName: 'Tech Store BD',
    sellerId: '1',
    sellerName: 'Ahmed Rahman',
    items: [
      {
        id: 'item-9',
        productId: 'p5',
        productName: 'iPad Air M2',
        productImage: 'https://images.unsplash.com/photo-1544244015-0df4b3ffc6b0?w=100&h=100&fit=crop',
        sku: 'IPA-M2-256',
        quantity: 1,
        unitPrice: 95000,
        totalPrice: 95000,
      },
    ],
    subtotal: 95000,
    shippingCost: 0,
    discount: 2000,
    total: 93000,
    paymentMethod: 'bank_transfer',
    paymentStatus: 'paid',
    status: 'frozen',
    shippingAddress: {
      address: 'House 56, Lane 4',
      city: 'Dhaka',
      area: 'Mohammadpur',
      zipCode: '1207',
    },
    timeline: [
      { id: 't23', status: 'pending', description: 'Order placed', timestamp: '2026-01-21T10:00:00Z' },
      { id: 't24', status: 'confirmed', description: 'Order confirmed', timestamp: '2026-01-21T11:00:00Z', actor: 'Seller' },
      { id: 't25', status: 'frozen', description: 'Order frozen - Under investigation', timestamp: '2026-01-22T14:00:00Z', actor: 'Admin' },
    ],
    notes: 'Order frozen for fraud investigation - suspicious activity detected',
    createdAt: '2026-01-21T10:00:00Z',
    updatedAt: '2026-01-22T14:00:00Z',
  },
  {
    id: 'ord-8',
    orderNumber: 'ORD-2026-00008',
    customerId: 'cust-8',
    customerName: 'Amina Begum',
    customerEmail: 'amina@email.com',
    customerPhone: '+880 1911-888888',
    shopId: 'shop-3',
    shopName: 'Grocery Mart BD',
    sellerId: '5',
    sellerName: 'Karim Uddin',
    items: [
      {
        id: 'item-10',
        productId: 'p10',
        productName: 'Fresh Milk 1L',
        productImage: 'https://images.unsplash.com/photo-1563636619-e9143da7973b?w=100&h=100&fit=crop',
        sku: 'GM-FM-1L',
        quantity: 10,
        unitPrice: 95,
        totalPrice: 950,
      },
      {
        id: 'item-11',
        productId: 'p11',
        productName: 'Cooking Oil 5L',
        productImage: 'https://images.unsplash.com/photo-1474979266404-7eaacbcd87c5?w=100&h=100&fit=crop',
        sku: 'GM-CO-5L',
        quantity: 1,
        unitPrice: 850,
        totalPrice: 850,
      },
    ],
    subtotal: 1800,
    shippingCost: 30,
    discount: 0,
    total: 1830,
    paymentMethod: 'cod',
    paymentStatus: 'pending',
    status: 'pending',
    shippingAddress: {
      address: 'House 12, Road 3',
      city: 'Dhaka',
      area: 'Khilgaon',
      zipCode: '1219',
    },
    timeline: [
      { id: 't26', status: 'pending', description: 'Order placed', timestamp: '2026-01-23T08:00:00Z' },
    ],
    createdAt: '2026-01-23T08:00:00Z',
    updatedAt: '2026-01-23T08:00:00Z',
    estimatedDelivery: '2026-01-24',
  },
  {
    id: 'ord-9',
    orderNumber: 'ORD-2026-00009',
    customerId: 'cust-9',
    customerName: 'Jamal Hossain',
    customerEmail: 'jamal@email.com',
    customerPhone: '+880 1612-999999',
    shopId: 'shop-4',
    shopName: 'Sports Zone',
    sellerId: '7',
    sellerName: 'Imran Ali',
    items: [
      {
        id: 'item-12',
        productId: 'p13',
        productName: 'Cricket Bat English Willow',
        productImage: 'https://images.unsplash.com/photo-1531415074968-036ba1b575da?w=100&h=100&fit=crop',
        sku: 'SZ-CB-EW',
        quantity: 1,
        unitPrice: 15000,
        totalPrice: 15000,
      },
    ],
    subtotal: 15000,
    shippingCost: 150,
    discount: 1000,
    total: 14150,
    paymentMethod: 'nagad',
    paymentStatus: 'paid',
    status: 'cancelled',
    shippingAddress: {
      address: 'House 89, Road 15',
      city: 'Dhaka',
      area: 'Tejgaon',
      zipCode: '1208',
    },
    timeline: [
      { id: 't27', status: 'pending', description: 'Order placed', timestamp: '2026-01-18T11:00:00Z' },
      { id: 't28', status: 'confirmed', description: 'Order confirmed', timestamp: '2026-01-18T12:00:00Z', actor: 'Seller' },
      { id: 't29', status: 'cancelled', description: 'Order cancelled by customer', timestamp: '2026-01-18T18:00:00Z', actor: 'Customer' },
    ],
    refundRequest: {
      id: 'ref-2',
      orderId: 'ord-9',
      amount: 14150,
      reason: 'Customer cancelled - Changed mind',
      status: 'processing',
      requestedAt: '2026-01-18T18:00:00Z',
    },
    createdAt: '2026-01-18T11:00:00Z',
    updatedAt: '2026-01-18T18:00:00Z',
  },
  {
    id: 'ord-10',
    orderNumber: 'ORD-2026-00010',
    customerId: 'cust-10',
    customerName: 'Shirin Akter',
    customerEmail: 'shirin@email.com',
    customerPhone: '+880 1512-101010',
    shopId: 'shop-2',
    shopName: 'Fashion Hub',
    sellerId: '2',
    sellerName: 'Fatima Begum',
    items: [
      {
        id: 'item-13',
        productId: 'p6',
        productName: 'Premium Cotton T-Shirt',
        productImage: 'https://images.unsplash.com/photo-1521572163474-6864f9cf17ab?w=100&h=100&fit=crop',
        sku: 'FH-TS-001',
        quantity: 5,
        unitPrice: 1200,
        totalPrice: 6000,
      },
    ],
    subtotal: 6000,
    shippingCost: 50,
    discount: 300,
    total: 5750,
    paymentMethod: 'bkash',
    paymentStatus: 'paid',
    status: 'delivered',
    shippingAddress: {
      address: 'House 34, Block B',
      city: 'Dhaka',
      area: 'Lalmatia',
      zipCode: '1207',
    },
    timeline: [
      { id: 't30', status: 'pending', description: 'Order placed', timestamp: '2026-01-16T09:00:00Z' },
      { id: 't31', status: 'confirmed', description: 'Order confirmed', timestamp: '2026-01-16T10:00:00Z', actor: 'Seller' },
      { id: 't32', status: 'shipped', description: 'Order shipped', timestamp: '2026-01-17T08:00:00Z' },
      { id: 't33', status: 'delivered', description: 'Order delivered', timestamp: '2026-01-18T16:00:00Z' },
    ],
    returnRequest: {
      id: 'ret-1',
      orderId: 'ord-10',
      items: [{ productId: 'p6', productName: 'Premium Cotton T-Shirt', quantity: 2, reason: 'Wrong size received' }],
      status: 'requested',
      requestedAt: '2026-01-20T10:00:00Z',
    },
    createdAt: '2026-01-16T09:00:00Z',
    updatedAt: '2026-01-18T16:00:00Z',
    deliveredAt: '2026-01-18T16:00:00Z',
  },
];

export const calculatePaymentAnalytics = (orders: Order[]): PaymentAnalytics => {
  const codOrders = orders.filter(o => o.paymentMethod === 'cod');
  const onlineOrders = orders.filter(o => o.paymentMethod !== 'cod');
  
  const codRevenue = codOrders.reduce((sum, o) => sum + o.total, 0);
  const onlineRevenue = onlineOrders.reduce((sum, o) => sum + o.total, 0);
  const totalRevenue = codRevenue + onlineRevenue;

  const paymentMethods: Order['paymentMethod'][] = ['cod', 'bkash', 'nagad', 'card', 'bank_transfer'];
  const paymentMethodBreakdown = paymentMethods.map(method => ({
    method,
    count: orders.filter(o => o.paymentMethod === method).length,
    revenue: orders.filter(o => o.paymentMethod === method).reduce((sum, o) => sum + o.total, 0),
  }));

  return {
    totalOrders: orders.length,
    totalRevenue,
    codOrders: codOrders.length,
    codRevenue,
    onlineOrders: onlineOrders.length,
    onlineRevenue,
    codPercentage: orders.length > 0 ? (codOrders.length / orders.length) * 100 : 0,
    onlinePercentage: orders.length > 0 ? (onlineOrders.length / orders.length) * 100 : 0,
    averageOrderValue: orders.length > 0 ? totalRevenue / orders.length : 0,
    paymentMethodBreakdown,
  };
};
